# .htaccess for /public_html/questionnaire/
# This excludes API routes from being served as React app

RewriteEngine On

# Allow API routes to pass through to Node.js backend - DON'T serve as static files
# This rule says: "for API routes, don't apply any rewrite rules, let them pass through"
RewriteCond %{REQUEST_URI} ^/questionnaire/api/
RewriteRule ^api/(.*)$ - [L]

# For all other routes (React app routes), serve index.html
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/questionnaire/api/
RewriteRule . index.html [L]

# Set cache headers for static assets
<FilesMatch "\.(js|css|png|jpg|jpeg|gif|svg|ico|woff|woff2|ttf|eot)$">
    Header set Cache-Control "public, max-age=31536000"
</FilesMatch>

# Set proper MIME types
<IfModule mod_mime.c>
    AddType application/javascript .js
    AddType text/css .css
</IfModule>